---
import Container from "../components/shared/Container.astro";
import Navitem from "../components/shared/Navitem.astro";
import BtnLink from "../components/shared/BtnLink.astro";
import BtnThemeSwitch from "../components/shared/BtnThemeSwitch.astro";

const navItems = [
  { href: "#", text: "Home" },
  { href: "#services", text: "Services" },
  { href: "#innovations", text: "Innovations" },
  { href: "#testimonials", text: "Testimonials" },
  { href: "#environment", text: "Environment" },
  { href: "#projects", text: "Projects" },
];
---
<header class="fixed top-0 inset-x-0 z-50 bg-gray dark:bg-custom-dark-bg shadow-md">
  <Container className="py-4 flex items-center justify-between">
    <!-- Logo -->
    <a href="/energy-template" class="flex items-center gap-2">
      <!-- LOGO SVG -->
      <div class="h-8 w-auto">
        <!-- Inserta aquí tu SVG del logo -->
        <svg
          class="fill-primary h-full w-auto"
          id="logo-87"
          viewBox="0 0 202 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <!-- Contenido del SVG -->
        </svg>
      </div>
      <!-- Nombre de la marca (opcional) -->
      <span class="text-xl font-bold text-gray-800 dark:text-white">Resolve</span>
    </a>

    <!-- Menú de Navegación (Escritorio) -->
    <nav class="hidden lg:flex items-center gap-6">
      <ul class="flex items-center gap-4">
        {navItems.map((item, index) => (
          <Navitem key={index} href={item.href} text={item.text} />
        ))}
      </ul>
      <BtnLink
        text="Get Started"
        href="#cta"
        className="text-lg"
        variant="cta"
      />
      <BtnThemeSwitch variant="primary" />
    </nav>

    <!-- Botón de menú para móviles -->
    <button
      data-toggle-nav
      aria-label="Toggle navigation"
      class="lg:hidden flex items-center justify-center p-2 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary"
    >
      <!-- Icono de menú hamburguesa -->
      <svg
        class="h-6 w-6 text-gray-800 dark:text-white"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <!-- Icono de abierto -->
        <path
          data-open
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
        <!-- Icono de cerrado -->
        <path
          data-close
          class="hidden"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </Container>

  <!-- Menú desplegable para móviles -->
  <div
    data-navbar
    class="hidden lg:hidden bg-white dark:bg-custom-dark-bg shadow-md transition-all duration-300 ease-in-out"
  >
    <Container className="px-4 py-6 flex flex-col gap-4">
      <ul class="flex flex-col gap-3">
        {navItems.map((item, index) => (
          <Navitem key={index} href={item.href} text={item.text} />
        ))}
      </ul>
      <BtnLink
        text="Get Started"
        href="#cta"
        className="text-lg w-full text-center"
        variant="cta"
      />
      <div class="flex justify-center">
        <BtnThemeSwitch variant="primary" />
      </div>
    </Container>
  </div>
</header>

<script>
  const toggleButton = document.querySelector('[data-toggle-nav]');
  const navbar = document.querySelector('[data-navbar]');
  const openIcon = toggleButton?.querySelector('[data-open]');
  const closeIcon = toggleButton?.querySelector('[data-close]');

  toggleButton?.addEventListener('click', () => {
    if (navbar) {
      navbar.classList.toggle('hidden');
      openIcon?.classList.toggle('hidden');
      closeIcon?.classList.toggle('hidden');
    }
  });
</script>
